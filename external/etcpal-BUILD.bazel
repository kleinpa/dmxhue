cc_library(
    name = "etcpal_cpp",
    visibility = ["//visibility:public"],
    hdrs = [
        "include/etcpal/cpp/common.h",
        "include/etcpal/cpp/error.h",
        "include/etcpal/cpp/event_group.h",
        "include/etcpal/cpp/inet.h",
        "include/etcpal/cpp/log.h",
        "include/etcpal/cpp/mutex.h",
        "include/etcpal/cpp/opaque_id.h",
        "include/etcpal/cpp/queue.h",
        "include/etcpal/cpp/recursive_mutex.h",
        "include/etcpal/cpp/rwlock.h",
        "include/etcpal/cpp/sem.h",
        "include/etcpal/cpp/signal.h",
        "include/etcpal/cpp/thread.h",
        "include/etcpal/cpp/timer.h",
        "include/etcpal/cpp/uuid.h",
    ],
    strip_include_prefix = "include",
)

cc_library(
    name = "etcpal",
    hdrs = [
        "include/etcpal/acn_pdu.h",
        "include/etcpal/acn_prot.h",
        "include/etcpal/acn_rlp.h",
        "include/etcpal/common.h",
        "include/etcpal/error.h",
        "include/etcpal/event_group.h",
        "include/etcpal/handle_manager.h",
        "include/etcpal/inet.h",
        "include/etcpal/log.h",
        "include/etcpal/mempool.h",
        "include/etcpal/mutex.h",
        "include/etcpal/netint.h",
        "include/etcpal/pack.h",
        "include/etcpal/pack64.h",
        "include/etcpal/queue.h",
        "include/etcpal/rbtree.h",
        "include/etcpal/recursive_mutex.h",
        "include/etcpal/rwlock.h",
        "include/etcpal/sem.h",
        "include/etcpal/signal.h",
        "include/etcpal/socket.h",
        "include/etcpal/thread.h",
        "include/etcpal/timer.h",
        "include/etcpal/uuid.h",
        "include/etcpal/version.h",
    ],
    strip_include_prefix = "include",
    srcs = [
        "include/os/linux/etcpal/os_event_group.h",
        "include/os/linux/etcpal/os_inet.h",
        "include/os/linux/etcpal/os_mutex.h",
        "include/os/linux/etcpal/os_queue.h",
        "include/os/linux/etcpal/os_recursive_mutex.h",
        "include/os/linux/etcpal/os_rwlock.h",
        "include/os/linux/etcpal/os_sem.h",
        "include/os/linux/etcpal/os_signal.h",
        "include/os/linux/etcpal/os_socket.h",
        "include/os/linux/etcpal/os_thread.h",
        "src/etcpal/acn_pdu.c",
        "src/etcpal/acn_rlp.c",
        "src/etcpal/common.c",
        "src/etcpal/error.c",
        "src/etcpal/handle_manager.c",
        "src/etcpal/inet.c",
        "src/etcpal/log.c",
        "src/etcpal/mempool.c",
        "src/etcpal/netint.c",
        "src/etcpal/pack.c",
        "src/etcpal/private/log.h",
        "src/etcpal/private/netint.h",
        "src/etcpal/private/opts.h",
        "src/etcpal/private/socket.h",
        "src/etcpal/private/timer.h",
        "src/etcpal/queue.c",
        "src/etcpal/rbtree.c",
        "src/etcpal/thirdparty/md5.c",
        "src/etcpal/thirdparty/md5.h",
        "src/etcpal/thirdparty/sha1.c",
        "src/etcpal/thirdparty/sha1.h",
        "src/etcpal/timer.c",
        "src/etcpal/uuid.c",
        "src/os/linux/etcpal/os_error.c",
        "src/os/linux/etcpal/os_error.h",
        "src/os/linux/etcpal/os_event_group.c",
        "src/os/linux/etcpal/os_inet.c",
        "src/os/linux/etcpal/os_mutex.c",
        "src/os/linux/etcpal/os_netint.c",
        "src/os/linux/etcpal/os_recursive_mutex.c",
        "src/os/linux/etcpal/os_rwlock.c",
        "src/os/linux/etcpal/os_sem.c",
        "src/os/linux/etcpal/os_signal.c",
        "src/os/linux/etcpal/os_socket.c",
        "src/os/linux/etcpal/os_thread.c",
        "src/os/linux/etcpal/os_timer.c",
        "src/os/linux/etcpal/os_uuid.c",
    ],
    deps = ["@org_kernel_util_linux//:uuid"],
    linkopts = ["-pthread"],
    includes = ["src", "src/os/linux", "include/os/linux"],
    visibility = ["//visibility:public"],
)

cc_binary(
    name = "example_timer",
    srcs = [
        "examples/timer/timer_example.c",
    ],
    deps = ["@com_github_etclabs_etcpal//:etcpal"],
)
